<body>

	<div *ngIf="loading">
		<avk-loading></avk-loading>
	</div>

	<div *ngIf="!loading">

		<div class="btn-group btn-group-sm" role="group" aria-label="Select Theme" data-toggle="tooltip" data-placement="top" title="Click to select layout">
			<button *ngIf="listType==='list'" type="button" class="btn btn-outline-secondary active" style="cursor:pointer;"><i class="fas fa-list"></i></button>
			<button *ngIf="listType==='list'" type="button" class="btn btn-outline-secondary" style="cursor:pointer;" (click)="setListType('flex')"><i class="fas fa-th"></i></button>
			<button *ngIf="listType==='flex'" type="button" class="btn btn-outline-secondary" style="cursor:pointer;" (click)="setListType('list')"><i class="fas fa-list"></i></button>
			<button *ngIf="listType==='flex'" type="button" class="btn btn-outline-secondary active" style="cursor:pointer;"><i class="fas fa-th"></i></button>
		</div>  

		<div *ngIf="listType==='list'"(scrolled)="onScroll()" infiniteScroll [infiniteScrollDistance]="1" [infiniteScrollThrottle]="150">
			<div class="border" *ngFor="let product of products; index as i" style="box-shadow:2px 2px 2px #AAAAAA; margin-left:4px; margin-right:4px; margin-top:4px; margin-bottom:4px">
					<div class="row">
						<div class="col-1" data-toggle="tooltip" data-placement="top" title="Click to enlarge image" style="cursor:zoom-in;">
							<img class="col" onerror="this.style.display='none'" [src]="imageUrl + product.code" alt="missing picture" style="width:95%;height:auto;padding-left:10%; padding-right:2%; margin-left:auto; margin-right:auto; cursor:pointer;"/>
						</div>
						<div class="col-4 text-wrap" style="width:30px">
							<div class="col text-wrap"><b>{{ product.name }}</b></div>
							<div class="col text-wrap"><small>{{ product.company.description }} ({{ product.year }})</small></div>
							<div class="col text-wrap"><small>{{ product.gameConsole.description }}</small></div>
							<br>
							<div *ngFor="let productRating of product.productRatings; index as i">
								{{ 'Rated' | translate }} {{ productRating.rating }} by 
								<a href="//{{ productRating.ratingUrl.url }}" target="_blank">{{ productRating.ratingUrl.url }}</a>
							</div>
						</div>
						<div class="col text-wrap" [innerHtml]="product.description | safe: 'html'"></div>
					</div>
			</div>
		</div>

		<div *ngIf="listType==='flex'" class="d-flex align-content-stretch flex-wrap bd-highlight mb-3" (scrolled)="onScroll()" infiniteScroll [infiniteScrollDistance]="1" [infiniteScrollThrottle]="150">
			<div class="p-2 bd-highlight border" *ngFor="let product of products; index as i" style="box-shadow:2px 2px 2px #AAAAAA; margin-left:4px; margin-right:4px; margin-top:4px; margin-bottom:4px">
				<div>
					<div class="row">
						<div style="width:30%">
							<div data-toggle="tooltip" data-placement="top" title="Click to enlarge image" style="cursor:zoom-in;">
								<img class="col" onerror="this.style.display='none'" [src]="imageUrl + product.code" alt="missing picture" style="width:95%;height:auto;padding-left:10%; padding-right:2%; margin-left:auto; margin-right:auto; cursor:pointer;"/>
							</div>
						</div>
						<div class="col text-wrap" style="width:30px">
							<div class="col text-wrap"><b>{{ product.name }}</b></div>
							<div class="col text-wrap"><small>{{ product.company.description }} ({{ product.year }})</small></div>
							<div class="col text-wrap"><small>{{ product.gameConsole.description }}</small></div>
							<br>
							<div *ngFor="let productRating of product.productRatings; index as i">
								{{ 'Rated' | translate }} {{ productRating.rating }} by 
								<a href="//{{ productRating.ratingUrl.url }}" target="_blank">{{ productRating.ratingUrl.url }}</a>
							</div>
						</div>
					</div>
				</div>
				<hr/>
				<div [innerHtml]="product.description | safe: 'html'"></div>
			</div>
		</div>

	</div>		
</body>